<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>munet Network Library for muwerk Scheduler: ustd::Mqtt Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">munet Network Library for muwerk Scheduler
   </div>
   <div id="projectbrief">A muwerk network library supporting WiFi, NTP, OTA and MQTT for ESP8266 and ESP32 and serial links for all platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceustd.html">ustd</a></li><li class="navelem"><a class="el" href="classustd_1_1Mqtt.html">Mqtt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classustd_1_1Mqtt-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ustd::Mqtt Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>munet MQTT Gateway Class  
 <a href="classustd_1_1Mqtt.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mqtt_8h_source.html">mqtt.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acf5f14eae3b54a704e2ccb6f278e2f3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#acf5f14eae3b54a704e2ccb6f278e2f3b">Mqtt</a> ()</td></tr>
<tr class="separator:acf5f14eae3b54a704e2ccb6f278e2f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aeeadb6e7c1df9b67ea34d12441677c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#a8aeeadb6e7c1df9b67ea34d12441677c">begin</a> (Scheduler *_pSched, String _mqttServer=&quot;&quot;, uint16_t _mqttServerPort=1883, bool _mqttRetained=false, String _clientName=&quot;${hostname}&quot;, String _domainToken=&quot;mu&quot;, String _outDomainToken=&quot;omu&quot;, String _mqttUsername=&quot;&quot;, String _mqttPassword=&quot;&quot;, String _willTopic=&quot;&quot;, String _willMessage=&quot;&quot;)</td></tr>
<tr class="separator:a8aeeadb6e7c1df9b67ea34d12441677c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a278b44030a8a96926b02d28106bc1db1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#a278b44030a8a96926b02d28106bc1db1">addSubscription</a> (int taskID, String topic, T_SUBS subs, String originator=&quot;&quot;)</td></tr>
<tr class="separator:a278b44030a8a96926b02d28106bc1db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a557f8139ed4edeff0f2f79cdb287890a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#a557f8139ed4edeff0f2f79cdb287890a">removeSubscription</a> (int subscriptionHandle, String topic)</td></tr>
<tr class="separator:a557f8139ed4edeff0f2f79cdb287890a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc7417556f45142e028d5b3fbb97ffd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#a9bc7417556f45142e028d5b3fbb97ffd">outgoingBlockSet</a> (String topic)</td></tr>
<tr class="separator:a9bc7417556f45142e028d5b3fbb97ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de557eb6556d342164a710af46a2ee9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#a9de557eb6556d342164a710af46a2ee9">outgoingBlockRemove</a> (String topic)</td></tr>
<tr class="separator:a9de557eb6556d342164a710af46a2ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9fc3892c0af74b22cfbfecec51d355e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#aa9fc3892c0af74b22cfbfecec51d355e">incomingBlockSet</a> (String topic)</td></tr>
<tr class="separator:aa9fc3892c0af74b22cfbfecec51d355e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa853edd665175ae45c205ac05c88427e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classustd_1_1Mqtt.html#aa853edd665175ae45c205ac05c88427e">incomingBlockRemove</a> (String topic)</td></tr>
<tr class="separator:aa853edd665175ae45c205ac05c88427e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>munet MQTT Gateway Class </p>
<p>The muwerk scheduler implements pub/sub inter-task communication between muwerk tasks. Tasks can subscribe to MQTT formatted topics and publish messages. The MQTT Class implements a gateway between the muwerk scheduler's message queue and an external MQTT server.</p>
<h3>Publishing to external server:</h3>
<p>This object extends the internal communication to external MQTT servers. All internal muwerk messages are published to the external MQTT server with prefix <code>&lt;outDomainPrefix&gt;/&lt;hostname&gt;/</code>. E.g. if a muwerk task &lsquo;ustd::Scheduler.publish('led/set&rsquo;, 'on')<code>and</code>clientName<code>of ESP is </code>myhost<code>, an MQTT publish message with topic</code>'omu/myhost/led/set'<code>and msg</code>on<code>is sent to the external server. Default</code>outDomainPrefix<code>is</code>'omu'<code>. In order to publish to an unmodified topic, prefix the topic with</code>'!'<code>, then neither</code>outDomainPrefix<code>nor</code>clientName<code>are prepended. E.g. publish to topic</code>'!system/urgent'<code>will cause an MQTT publish to</code>'system/urgent'` with no additional prefixes. Note: this can cause recursions.</p>
<h3>Subscribing from external server:</h3>
<p>This object subscribes two wild-card topics on the external server:</p>
<ol type="1">
<li><code>&lt;clientName&gt;/#</code></li>
<li><code>&lt;domainToken&gt;/#</code></li>
</ol>
<p><code>&lt;clientName&gt;</code> is by default the hostname of the device chip, but can be overwritten using <code>_clientName</code> in <code><a class="el" href="classustd_1_1Mqtt.html#a8aeeadb6e7c1df9b67ea34d12441677c">ustd::Mqtt.begin()</a>;</code>. <code>domainToken</code> is "mu" by default and can be overwritten using <code>_domainToken</code> in <code><a class="el" href="classustd_1_1Mqtt.html#a8aeeadb6e7c1df9b67ea34d12441677c">ustd::Mqtt.begin()</a></code>;</p>
<p>Received messsages are stripped of <code>clientName</code> or <code>domainToken</code> prefix and published into <code>ustd::Scheduler.publish()</code>. That way external MQTT messages are routed to any muwerk task that uses the internal muwerk <code>ustd::Scheduler.subscribe()</code> mechanism, and all muwerk tasks can publish to external MQTT entities transparently.</p>
<p>Additionally, arbitrary topics can be subscribed to via <code><a class="el" href="classustd_1_1Mqtt.html#a278b44030a8a96926b02d28106bc1db1">addSubscription()</a></code>. Topics that are added via <code><a class="el" href="classustd_1_1Mqtt.html#a278b44030a8a96926b02d28106bc1db1">addSubscription()</a></code> are transparently forwarded. Nothing is stripped, and it is user's responsibility to prevent loops.</p>
<h2>Sample MQTT Integration</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#define __ESP__ 1   </span><span class="comment">// Platform defines required, see doc, mainpage.</span></div>
<div class="line"><span class="preprocessor">#include &quot;scheduler.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;net.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mqtt.h&quot;</span></div>
<div class="line"> </div>
<div class="line">ustd::Scheduler sched;</div>
<div class="line"><a class="code" href="classustd_1_1Net.html">ustd::Net</a> net();</div>
<div class="line"><a class="code" href="classustd_1_1Mqtt.html">ustd::Mqtt</a> mqtt;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    net.<a class="code" href="classustd_1_1Mqtt.html#a8aeeadb6e7c1df9b67ea34d12441677c">begin</a>(&amp;sched);</div>
<div class="line">    mqtt.<a class="code" href="classustd_1_1Mqtt.html#a8aeeadb6e7c1df9b67ea34d12441677c">begin</a>(&amp;sched);</div>
<div class="line">}</div>
<div class="ttc" id="aclassustd_1_1Mqtt_html"><div class="ttname"><a href="classustd_1_1Mqtt.html">ustd::Mqtt</a></div><div class="ttdoc">munet MQTT Gateway Class</div><div class="ttdef"><b>Definition:</b> mqtt.h:79</div></div>
<div class="ttc" id="aclassustd_1_1Mqtt_html_a8aeeadb6e7c1df9b67ea34d12441677c"><div class="ttname"><a href="classustd_1_1Mqtt.html#a8aeeadb6e7c1df9b67ea34d12441677c">ustd::Mqtt::begin</a></div><div class="ttdeci">void begin(Scheduler *_pSched, String _mqttServer=&quot;&quot;, uint16_t _mqttServerPort=1883, bool _mqttRetained=false, String _clientName=&quot;${hostname}&quot;, String _domainToken=&quot;mu&quot;, String _outDomainToken=&quot;omu&quot;, String _mqttUsername=&quot;&quot;, String _mqttPassword=&quot;&quot;, String _willTopic=&quot;&quot;, String _willMessage=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> mqtt.h:134</div></div>
<div class="ttc" id="aclassustd_1_1Net_html"><div class="ttname"><a href="classustd_1_1Net.html">ustd::Net</a></div><div class="ttdoc">munet, the muwerk network class for WiFi and NTP</div><div class="ttdef"><b>Definition:</b> net.h:72</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acf5f14eae3b54a704e2ccb6f278e2f3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf5f14eae3b54a704e2ccb6f278e2f3b">&#9670;&nbsp;</a></span>Mqtt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ustd::Mqtt::Mqtt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Instantiate an MQTT client object using the PubSubClient library.</p>
<p>This object connects to an external MQTT server as soon as a network connection is available.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a278b44030a8a96926b02d28106bc1db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a278b44030a8a96926b02d28106bc1db1">&#9670;&nbsp;</a></span>addSubscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ustd::Mqtt::addSubscription </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>taskID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T_SUBS&#160;</td>
          <td class="paramname"><em>subs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>originator</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Subscribe via MQTT server to a topic to receive messages published to this topic</p>
<p>This function is similar to muwerk's <code>subscribe()</code> function, but in addition, this function does an external MQTT subscribe. By default, munet's mqtt only subscribes to topics that either start with <code>clientName</code> or with an optional <code>domainName</code>. Via this function, arbitrary MQTT subscriptions can be added.</p>
<p><code><a class="el" href="classustd_1_1Mqtt.html#a278b44030a8a96926b02d28106bc1db1">addSubscription()</a></code> subscribes on two layers: locally to muwerk's scheduler, and externally with the MQTT server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskID</td><td>ID of the task that is associated with this subscriptions (only used for statistics) </td></tr>
    <tr><td class="paramname">topic</td><td>MQTT-style topic to be subscribed, can contain MQTT wildcards '#' and '*'. (A subscription to '#' receives all pubs) </td></tr>
    <tr><td class="paramname">subs</td><td>Callback of type <code>void myCallback(String topic, String msg, String originator)</code> that is called, if a matching message is received. On ESP or Unixoid platforms, this can be a member function. </td></tr>
    <tr><td class="paramname">originator</td><td>Optional name of associated task. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>subscriptionHandle on success (needed for unsubscribe), or -1 on error.</dd></dl>

</div>
</div>
<a id="a8aeeadb6e7c1df9b67ea34d12441677c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aeeadb6e7c1df9b67ea34d12441677c">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ustd::Mqtt::begin </td>
          <td>(</td>
          <td class="paramtype">Scheduler *&#160;</td>
          <td class="paramname"><em>_pSched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_mqttServer</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>_mqttServerPort</em> = <code>1883</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>_mqttRetained</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_clientName</em> = <code>&quot;${hostname}&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_domainToken</em> = <code>&quot;mu&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_outDomainToken</em> = <code>&quot;omu&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_mqttUsername</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_mqttPassword</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_willTopic</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>_willMessage</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Connect to external MQTT server as soon as network is available</p>
<p>This method starts the MQTT gateway using the information stored into the configuration file /mqtt.json. All parameters passed in this method act as defaults if the corresponding option is not set in the configuration file. As soon as a network connection is available, the MQTT gateway is started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_pSched</td><td>Pointer to the muwerk scheduler. </td></tr>
    <tr><td class="paramname">_mqttServer</td><td>(optional, default is empty) Hostname or ip address of the MQTT server. </td></tr>
    <tr><td class="paramname">_mqttServerPort</td><td>(optional, default is 1883) Port number under which the MQTT server is reachable </td></tr>
    <tr><td class="paramname">_mqttRetained</td><td>(optional, default is <code>false</code>) If <code>true</code>, all messages published to the MQTT server will be flagged as RETAINED. </td></tr>
    <tr><td class="paramname">_clientName</td><td>(optional, default is ${hostname}) the MQTT client name. <b>WARNING:</b> this name must be unique! Otherwise the MQTT server will rapidly disconnect. </td></tr>
    <tr><td class="paramname">_domainToken</td><td>(optional, default is "mu") The MQTT client submitts to message topics <code>&lt;_clientName&gt;/#</code> and <code>&lt;_domainToken&gt;/#</code>, strips both <code>&lt;_domainToken&gt;</code> and <code>&lt;_clientName&gt;</code> from received topics and publishes those messages to the internal muwerk interface <code>ustd::scheduler.publish()</code>. </td></tr>
    <tr><td class="paramname">_outDomainToken</td><td>(optional, default is "omu") All pubblications from this client to outside MQTT-servers have their topic prefixed by <code>&lt;outDomainName&gt;/&lt;clientName&gt;/topic</code>. This is to prevent recursions. </td></tr>
    <tr><td class="paramname">_mqttUsername</td><td>Username for mqtt server authentication, leave empty "" for no username. </td></tr>
    <tr><td class="paramname">_mqttPassword</td><td>Password for mqtt server authentication, leave empty "" for no password. </td></tr>
    <tr><td class="paramname">_willTopic</td><td>Topic of mqtt last will. Default is <code>&lt;outDomainName&gt;/&lt;clientName&gt;/mqtt/state</code>. Note: it is not recommended to change will-configuration, when using the home-assistant configuration. </td></tr>
    <tr><td class="paramname">_willMessage</td><td>Message content for last will message. Default is <code>disconnected</code></td></tr>
  </table>
  </dd>
</dl>
<p>he configuration options <code>clientName</code> and <code>willMessage</code> support the use of placeholders in order to allow values that are specific to a certain device without the need to create separate configuration files. Placeholders are written in the form of <code>${PLACEHOLDER}</code>.</p>
<p>The following placeholders are currently available:</p><ul>
<li><code>mac</code>: full mac address</li>
<li><code>macls</code>: last 4 digits of mac address</li>
<li><code>macfs</code>: first 4 digits of mac address</li>
<li><code>hostname</code>: the hostname of the system (from network)</li>
</ul>

</div>
</div>
<a id="aa853edd665175ae45c205ac05c88427e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa853edd665175ae45c205ac05c88427e">&#9670;&nbsp;</a></span>incomingBlockRemove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ustd::Mqtt::incomingBlockRemove </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unblock a topic-wildcard from being received from external mqtt server</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>An mqtt topic wildcard for topics that should again be forwarded internally to muwerk. Unblock only removes a a block identical to the given topic. So topic must be identical to a topic (wildcard) that has been used with <code><a class="el" href="classustd_1_1Mqtt.html#aa9fc3892c0af74b22cfbfecec51d355e">incomingBlockSet()</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> if no corresponding block entry be found.</dd></dl>

</div>
</div>
<a id="aa9fc3892c0af74b22cfbfecec51d355e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9fc3892c0af74b22cfbfecec51d355e">&#9670;&nbsp;</a></span>incomingBlockSet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ustd::Mqtt::incomingBlockSet </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Block a topic-wildcard from being published to the internal scheduler</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>An mqtt topic wildcard for topics that should not be forwarded from external mqtt server to the muwerk scheduler. This can be used to block any incoming messages according to their topic. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success or if entry already exists, <code>false</code> if entry couldn't be added.</dd></dl>

</div>
</div>
<a id="a9de557eb6556d342164a710af46a2ee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9de557eb6556d342164a710af46a2ee9">&#9670;&nbsp;</a></span>outgoingBlockRemove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ustd::Mqtt::outgoingBlockRemove </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unblock a topic-wildcard from being published to external mqtt server</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>An mqtt topic wildcard for topics that should again be forwarded to external mqtt. Unblock only removes a a block identical to the given topic. So topic must be identical to a topic (wildcard) that has been used with <code><a class="el" href="classustd_1_1Mqtt.html#a9bc7417556f45142e028d5b3fbb97ffd">outgoingBlockSet()</a></code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success, <code>false</code> if no corresponding block could be found.</dd></dl>

</div>
</div>
<a id="a9bc7417556f45142e028d5b3fbb97ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc7417556f45142e028d5b3fbb97ffd">&#9670;&nbsp;</a></span>outgoingBlockSet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ustd::Mqtt::outgoingBlockSet </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Block a topic-wildcard from being published to external mqtt server</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>An mqtt topic wildcard for topics that should not be forwarded to external mqtt. E.g. <code>mymupplet/#</code> Would block all messages a mupplet with name 'mymupplet' publishes from being forwarded to the extern mqtt server </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on success or if entry already exists, <code>false</code> if entry couldn't be added.</dd></dl>

</div>
</div>
<a id="a557f8139ed4edeff0f2f79cdb287890a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a557f8139ed4edeff0f2f79cdb287890a">&#9670;&nbsp;</a></span>removeSubscription()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ustd::Mqtt::removeSubscription </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>subscriptionHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>topic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unsubscribe a subscription</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscriptionHandle</td><td>Handle to subscription as returned by <code>subscribe()</code>, used for unsubscribe with muwerk's scheduler. </td></tr>
    <tr><td class="paramname">topic</td><td>The topic string that was used in <code>addSubscription</code>, used for unsubscribe via MQTT server. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> on successful unsubscription, <code>false</code> if no corresponding subscription is found.</dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="mqtt_8h_source.html">mqtt.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
